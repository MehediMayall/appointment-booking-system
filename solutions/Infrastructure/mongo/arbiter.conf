# MongoDB Configuration File

net:
  port: 27020
  bindIp: 0.0.0.0  # Allows connections from all sources

storage:
  dbPath: /data/db
  journal:
    enabled: false  # Disable journaling for max write speed (enable in production)
  wiredTiger:
    engineConfig:
      cacheSizeGB: 2  # Use 2GB cache (adjust based on available memory)
    collectionConfig:
      blockCompressor: snappy  # Fastest compression for reads
    indexConfig:
      prefixCompression: true  # Reduce index storage

replication:
  replSetName: rs0
  oplogSizeMB: 1024  # Increase oplog size for high throughput replication

processManagement:
  fork: true  # Run as a background process

systemLog:
  destination: file
  path: /var/log/mongodb/mongod.log
  logAppend: true

security:
  authorization: enabled  # Enables role-based access control (RBAC)

setParameter:
  cursorTimeoutMillis: 600000  # Keep idle cursors alive longer
  wiredTigerConcurrentReadTransactions: 128  # Allow more concurrent reads
  wiredTigerConcurrentWriteTransactions: 128  # Allow more concurrent writes
  enableFlowControl: false  # Reduce latency for high-throughput writes

net:
  unixDomainSocket:
    enabled: false
  maxIncomingConnections: 65000  # Handle high concurrent connections
